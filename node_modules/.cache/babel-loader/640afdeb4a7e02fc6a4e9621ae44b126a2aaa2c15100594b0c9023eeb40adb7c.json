{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  name: 'UpdateEmail',\n  data() {\n    return {\n      password: null,\n      newEmail: null,\n      confirmNewEmail: null,\n      incorrectPassword: false,\n      validForm: false,\n      rules: {\n        required: value => !!value || 'Required field',\n        match: value => value === this.newEmail || 'Emails do not match'\n      }\n    };\n  },\n  methods: {\n    async changeEmail() {\n      // Check if fields are correct\n      if (this.validForm) {\n        // Update email in the database\n        await axios.patch(`http://localhost:3000/api/user/${this.$store.state.userID}/email`, {\n          password: this.password,\n          email: this.newEmail\n        }).then(() => {\n          this.$store.commit(\"setNotification\", {\n            text: \"Successfully updated email\",\n            color: \"primary\"\n          });\n          this.$router.push('/dashboard');\n        }).catch(() => {\n          // Handles incorrect password\n          this.incorrectPassword = true;\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","password","newEmail","confirmNewEmail","incorrectPassword","validForm","rules","required","value","match","methods","changeEmail","patch","$store","state","userID","email","then","commit","text","color","$router","push","catch"],"sources":["src/components/UpdateEmail.vue"],"sourcesContent":["<template>\r\n    <v-card class=\"pa-10 mx-auto mt-10 text-center\" width=\"330\">\r\n        <v-img eager src=\"../assets/logo64x64.png\" max-height=\"50\" max-width=\"50\" class=\"mx-auto\"></v-img>\r\n\r\n        <v-text-field class=\"mt-4\" label=\"Current Password\" :error=\"incorrectPassword\" type=\"password\" v-model=\"password\"></v-text-field>\r\n        <v-card-text v-if=\"incorrectPassword\" class=\"error--text pa-0\">Incorrect password</v-card-text>\r\n\r\n        <v-form v-model=\"validForm\">\r\n            <v-text-field class=\"my-4\" label=\"New Email\" v-model=\"newEmail\" :rules=\"[rules.required]\"></v-text-field>\r\n            <v-text-field class=\"mb-4\" label=\"Confirm New Email\" v-model=\"confirmNewEmail\" :rules=\"[rules.match]\" @keyup.enter=\"changeEmail\"></v-text-field>\r\n\r\n            <v-btn tile class=\"primary mt-4\" width=\"200\" @click=\"changeEmail\">Submit</v-btn>\r\n        </v-form>\r\n    </v-card>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n    name: 'UpdateEmail',\r\n\r\n    data() {\r\n        return {\r\n            password: null,\r\n            newEmail: null,\r\n            confirmNewEmail: null,\r\n\r\n            incorrectPassword: false,\r\n            validForm: false,\r\n            rules: {\r\n                required: value => !!value || 'Required field',\r\n                match: value => value === this.newEmail || 'Emails do not match'\r\n            },\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        async changeEmail () {\r\n            // Check if fields are correct\r\n            if (this.validForm) {\r\n                // Update email in the database\r\n                await axios.patch(`http://localhost:3000/api/user/${this.$store.state.userID}/email`, {\r\n                    password: this.password,\r\n                    email: this.newEmail\r\n                })\r\n                .then(() => {\r\n                    this.$store.commit(\"setNotification\", {\r\n                        text: \"Successfully updated email\",\r\n                        color: \"primary\"}\r\n                    )\r\n                    this.$router.push('/dashboard')\r\n                })\r\n                .catch(() => {\r\n                    // Handles incorrect password\r\n                    this.incorrectPassword = true\r\n                })\r\n            }\r\n        }\r\n    },\r\n}\r\n</script>"],"mappings":";AAiBA,OAAAA,KAAA;AAEA;EACAC,IAAA;EAEAC,KAAA;IACA;MACAC,QAAA;MACAC,QAAA;MACAC,eAAA;MAEAC,iBAAA;MACAC,SAAA;MACAC,KAAA;QACAC,QAAA,EAAAC,KAAA,MAAAA,KAAA;QACAC,KAAA,EAAAD,KAAA,IAAAA,KAAA,UAAAN,QAAA;MACA;IACA;EACA;EAEAQ,OAAA;IACA,MAAAC,YAAA;MACA;MACA,SAAAN,SAAA;QACA;QACA,MAAAP,KAAA,CAAAc,KAAA,wCAAAC,MAAA,CAAAC,KAAA,CAAAC,MAAA;UACAd,QAAA,OAAAA,QAAA;UACAe,KAAA,OAAAd;QACA,GACAe,IAAA;UACA,KAAAJ,MAAA,CAAAK,MAAA;YACAC,IAAA;YACAC,KAAA;UAAA,EACA;UACA,KAAAC,OAAA,CAAAC,IAAA;QACA,GACAC,KAAA;UACA;UACA,KAAAnB,iBAAA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}